---
layout: post
title: Let's Visualize some Penguins!
---

In this blog post, we will be visualizing data from the Palmer Penguins Dataset, which provides us details about penguins across three unique species.


![title](/images/penguins.png) 


## Getting the Data

We will be obtaining the data from an online github repository and transforming it into a Pandas dataframe to perform our cool visualizations with Python. 


```python
# importing the data 
import pandas as pd
import numpy as np
url = "https://raw.githubusercontent.com/PhilChodrow/PIC16B/master/datasets/palmer_penguins.csv"
penguins = pd.read_csv(url)
penguins
```

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>studyName</th>
      <th>Sample Number</th>
      <th>Species</th>
      <th>Region</th>
      <th>Island</th>
      <th>Stage</th>
      <th>Individual ID</th>
      <th>Clutch Completion</th>
      <th>Date Egg</th>
      <th>Culmen Length (mm)</th>
      <th>Culmen Depth (mm)</th>
      <th>Flipper Length (mm)</th>
      <th>Body Mass (g)</th>
      <th>Sex</th>
      <th>Delta 15 N (o/oo)</th>
      <th>Delta 13 C (o/oo)</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>PAL0708</td>
      <td>1</td>
      <td>Adelie Penguin (Pygoscelis adeliae)</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N1A1</td>
      <td>Yes</td>
      <td>11/11/07</td>
      <td>39.1</td>
      <td>18.7</td>
      <td>181.0</td>
      <td>3750.0</td>
      <td>MALE</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Not enough blood for isotopes.</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PAL0708</td>
      <td>2</td>
      <td>Adelie Penguin (Pygoscelis adeliae)</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N1A2</td>
      <td>Yes</td>
      <td>11/11/07</td>
      <td>39.5</td>
      <td>17.4</td>
      <td>186.0</td>
      <td>3800.0</td>
      <td>FEMALE</td>
      <td>8.94956</td>
      <td>-24.69454</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PAL0708</td>
      <td>3</td>
      <td>Adelie Penguin (Pygoscelis adeliae)</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N2A1</td>
      <td>Yes</td>
      <td>11/16/07</td>
      <td>40.3</td>
      <td>18.0</td>
      <td>195.0</td>
      <td>3250.0</td>
      <td>FEMALE</td>
      <td>8.36821</td>
      <td>-25.33302</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PAL0708</td>
      <td>4</td>
      <td>Adelie Penguin (Pygoscelis adeliae)</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N2A2</td>
      <td>Yes</td>
      <td>11/16/07</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Adult not sampled.</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PAL0708</td>
      <td>5</td>
      <td>Adelie Penguin (Pygoscelis adeliae)</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N3A1</td>
      <td>Yes</td>
      <td>11/16/07</td>
      <td>36.7</td>
      <td>19.3</td>
      <td>193.0</td>
      <td>3450.0</td>
      <td>FEMALE</td>
      <td>8.76651</td>
      <td>-25.32426</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>339</th>
      <td>PAL0910</td>
      <td>120</td>
      <td>Gentoo penguin (Pygoscelis papua)</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N38A2</td>
      <td>No</td>
      <td>12/1/09</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>340</th>
      <td>PAL0910</td>
      <td>121</td>
      <td>Gentoo penguin (Pygoscelis papua)</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N39A1</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>46.8</td>
      <td>14.3</td>
      <td>215.0</td>
      <td>4850.0</td>
      <td>FEMALE</td>
      <td>8.41151</td>
      <td>-26.13832</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>341</th>
      <td>PAL0910</td>
      <td>122</td>
      <td>Gentoo penguin (Pygoscelis papua)</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N39A2</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>50.4</td>
      <td>15.7</td>
      <td>222.0</td>
      <td>5750.0</td>
      <td>MALE</td>
      <td>8.30166</td>
      <td>-26.04117</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>342</th>
      <td>PAL0910</td>
      <td>123</td>
      <td>Gentoo penguin (Pygoscelis papua)</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N43A1</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>45.2</td>
      <td>14.8</td>
      <td>212.0</td>
      <td>5200.0</td>
      <td>FEMALE</td>
      <td>8.24246</td>
      <td>-26.11969</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>343</th>
      <td>PAL0910</td>
      <td>124</td>
      <td>Gentoo penguin (Pygoscelis papua)</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N43A2</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>49.9</td>
      <td>16.1</td>
      <td>213.0</td>
      <td>5400.0</td>
      <td>MALE</td>
      <td>8.36390</td>
      <td>-26.15531</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>344 rows × 17 columns</p>
</div>


## Cleaning the Data
Before me move on to perform advanced visualizations functions, we need to make sure our data is nice and clean to avoid errors and unintended outputs.

We are going to create a function clean_data that will:

1. Relabel Species column to enhance readability to the viewer (For example: "Adelie Penguin (Pygoscelis adelie)" is relabeled to "Adelie")
2. Relabel Sex column ("MALE" is relabeled to "M" and "FEMALE" is relabeled to "F")
3. Return a clean dataset 


```python
def clean_data(df):
    
    """
    This function does the following:

    1. Relabel Species column to enhance readability to the viewer (For example: "Adelie Penguin (Pygoscelis adelie)" is relabeled to "Adelie")
    2. Relabel Sex column ("MALE" is relabeled to "M" and "FEMALE" is relabeled to "F")
    3. Return a clean dataset 
    
    It returns:
    A clean copy of our data set. 
    """
    
    # create a copy 
    df_copy = df.copy()
    
    # making the labels using dictionaries 
    species_labels = { 'Adelie Penguin (Pygoscelis adeliae)': 'Adelie',
                       'Chinstrap penguin (Pygoscelis antarctica)': 'Chinstrap',
                       'Gentoo penguin (Pygoscelis papua)': 'Gentoo' }
    
    sex_labels = { "MALE": 'M',
                   "FEMALE": 'F',
                   ".": np.nan }
    
    # relabeling the columns 
    df_copy["Species"] =  df_copy["Species"].map(species_labels)
    df_copy["Sex"] = df_copy["Sex"].map(sex_labels)
    
    return df_copy
```


```python
# the new clean and shiny dataframe
df = clean_data(penguins)
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>studyName</th>
      <th>Sample Number</th>
      <th>Species</th>
      <th>Region</th>
      <th>Island</th>
      <th>Stage</th>
      <th>Individual ID</th>
      <th>Clutch Completion</th>
      <th>Date Egg</th>
      <th>Culmen Length (mm)</th>
      <th>Culmen Depth (mm)</th>
      <th>Flipper Length (mm)</th>
      <th>Body Mass (g)</th>
      <th>Sex</th>
      <th>Delta 15 N (o/oo)</th>
      <th>Delta 13 C (o/oo)</th>
      <th>Comments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>PAL0708</td>
      <td>1</td>
      <td>Adelie</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N1A1</td>
      <td>Yes</td>
      <td>11/11/07</td>
      <td>39.1</td>
      <td>18.7</td>
      <td>181.0</td>
      <td>3750.0</td>
      <td>M</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Not enough blood for isotopes.</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PAL0708</td>
      <td>2</td>
      <td>Adelie</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N1A2</td>
      <td>Yes</td>
      <td>11/11/07</td>
      <td>39.5</td>
      <td>17.4</td>
      <td>186.0</td>
      <td>3800.0</td>
      <td>F</td>
      <td>8.94956</td>
      <td>-24.69454</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PAL0708</td>
      <td>3</td>
      <td>Adelie</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N2A1</td>
      <td>Yes</td>
      <td>11/16/07</td>
      <td>40.3</td>
      <td>18.0</td>
      <td>195.0</td>
      <td>3250.0</td>
      <td>F</td>
      <td>8.36821</td>
      <td>-25.33302</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PAL0708</td>
      <td>4</td>
      <td>Adelie</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N2A2</td>
      <td>Yes</td>
      <td>11/16/07</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Adult not sampled.</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PAL0708</td>
      <td>5</td>
      <td>Adelie</td>
      <td>Anvers</td>
      <td>Torgersen</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N3A1</td>
      <td>Yes</td>
      <td>11/16/07</td>
      <td>36.7</td>
      <td>19.3</td>
      <td>193.0</td>
      <td>3450.0</td>
      <td>F</td>
      <td>8.76651</td>
      <td>-25.32426</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>339</th>
      <td>PAL0910</td>
      <td>120</td>
      <td>Gentoo</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N38A2</td>
      <td>No</td>
      <td>12/1/09</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>340</th>
      <td>PAL0910</td>
      <td>121</td>
      <td>Gentoo</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N39A1</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>46.8</td>
      <td>14.3</td>
      <td>215.0</td>
      <td>4850.0</td>
      <td>F</td>
      <td>8.41151</td>
      <td>-26.13832</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>341</th>
      <td>PAL0910</td>
      <td>122</td>
      <td>Gentoo</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N39A2</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>50.4</td>
      <td>15.7</td>
      <td>222.0</td>
      <td>5750.0</td>
      <td>M</td>
      <td>8.30166</td>
      <td>-26.04117</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>342</th>
      <td>PAL0910</td>
      <td>123</td>
      <td>Gentoo</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N43A1</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>45.2</td>
      <td>14.8</td>
      <td>212.0</td>
      <td>5200.0</td>
      <td>F</td>
      <td>8.24246</td>
      <td>-26.11969</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>343</th>
      <td>PAL0910</td>
      <td>124</td>
      <td>Gentoo</td>
      <td>Anvers</td>
      <td>Biscoe</td>
      <td>Adult, 1 Egg Stage</td>
      <td>N43A2</td>
      <td>Yes</td>
      <td>11/22/09</td>
      <td>49.9</td>
      <td>16.1</td>
      <td>213.0</td>
      <td>5400.0</td>
      <td>M</td>
      <td>8.36390</td>
      <td>-26.15531</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>344 rows × 17 columns</p>
</div>



## <b> But What to Visualize? </b>

There are many visualizations we can attempt with this data in order to facilitate our understanding of these penguins. But for now, let's assess how big each species is relative to each other. We can get valuable insights to answer this question by analyzing the `Body Mass (g)` feature of our dataset. 

We can also analyze if being on certain islands affects the size of our penguins.

Thus, we will plot 3 figures representing each island and visualize penguin mass with histograms for each species within the figure.

# <b> Let's Start to Visualize! </b>

Let's import our powerful visualization packages first, `Seaborn & Matplotlib`, and start visualizing penguins!


```python
import seaborn as sns
from matplotlib import pyplot as plt
```

### <b>1. Make a figure. </b>

We make a figure in which are plots will be embedded in. 

This is done by the command:
```python
plt.figure(figsize = (10,20)). #Fill in the figsize parameter to set the (width,height) of the figure.
```
Now, we have a space ready to fill in with our data visualizations. 
    
### <b> 2. Make sub plots if you want multiple plots. </b>
Our aim is visualize 3 histograms together so we will use a structure with 1 row and 3 columns; the first plot is represented by:
```python
plt.subplots(1,3,1) # (rows, columns, the plot)
```

### <b> 3. Start Plotting! </b>

Before we move on to plot multi-histograms in one figure, let's try and learn the basics of plotting a simple histogram first.

Let's plot a simple histogram visualizing culmen lengths of penguins using our seaborn package.

```python
# make the figure
plt.figure(figsize = (20,5))

# specify the subplot
plt.subplot(1,3,1) 

# make the plot
plot = sns.histplot(data = df, 
                    x = "Culmen Length (mm)", 
                    color = "yellow" 
                    )
    
# set the title of the plot
plot.set_title("Culmen Length of Penguins") 
 ```

{::options parse_block_html="true" /}
<div class="gave-help">

`sns.histplot` calls the `histplot` function of the `seaborn` package.

We have given this function the following parameters:
- `data`: specify the dataframe
- `x`: the column to plot
- `color`: the color of the histogram
</div>

{::options parse_block_html="false" /}


![title](/images/simple_hist.png) 


- #### Preferably, we would want to see how the distribution of `Culmen Length (mm)` is different for different species. Let's add color to differentiate among different species.

```python
# make the figure
plt.figure(figsize = (20,5)) 

# specify the subplot
plt.subplot(1,3,1) 

plot = sns.histplot(data = df, 
                    x = "Culmen Length (mm)", 
                    hue = "Species", 
                    palette = dict( Adelie = "yellow", Gentoo = "blue", Chinstrap = "red")
                    )

# set the title of the plot
plot.set_title("Culmen Length of Penguins") 

 ```

{::options parse_block_html="true" /}
<div class="gave-help">

Explanation of the new parameters:
- `hue`: groups `Species` by colour
- `palette`: choose your favorite colors!
</div>

{::options parse_block_html="false" /}


![title](/images/simple_hist2.png) 

- #### The plot is still a bit hard to read...let's change the boxy shape of the bins to better visualize the variation between species better.

```python
# make the figure
plt.figure(figsize = (20,5)) 

# specify the subplot
plt.subplot(1,3,1) 

plot = sns.histplot(data = df,
                     x = "Culmen Length (mm)", 
                     hue = "Species", 
                     element = "poly", 
                     palette = dict( Adelie = "yellow", Gentoo = "blue", Chinstrap = "green") 
                     )

# set the title of the plot
plot.set_title("Culmen Length of Penguins") 
```
    
![title](/images/simple_hist3.png) 
    
Now that is much better! 

We can now explore some more advanced seaborn features and combine them to produce the visualization below to answer key question we posed earlier in the blog:

## Plotting `Body Mass (g)` of Penguins Across Islands

```python
plt.figure(figsize = (20,5))

# a list containing the unique island names
islands = list(set(df["Island"])) 

# create the visualization

#iterate over the subplots
for i in range(1, len(islands) + 1): 
    
    plt.subplot(1,3,i) # the subplot in the grid
    
    sub_df = df[df["Island"] == islands[i-1]] # get the subset of data according to each island
    
    plot = sns.histplot(data = sub_df, 
                        x = "Body Mass (g)", 
                        hue = "Species", 
                        element = "poly", 
                        palette = dict( Adelie = "yellow", Gentoo = "blue", Chinstrap = "green")) 
    
    plot.set(xlim =(2500,6500)) # we want the every x-axis to have the same scale to compare the penguins 

    # set title of subplot to the island name 
    plt.title(islands[i-1])    
    
    # Plotting the vertical lines for mean body mass of Adelie Penguins
    group = sub_df.groupby("Species")["Body Mass (g)"].mean() # mean of Body Mass of Adelie penguins
    plt.axvline(group[0], ls = '--', color = 'black', label = "Adelie mean") # add a vertical line
    
    # adding text
    if i == 1:
        plt.text(4750, 12, "The vertical line is the mean \nbody mass for Adelie Penguins", size = 10, style = 'italic')
    
```

{::options parse_block_html="true" /}
<div class="gave-help">

Explanation of the new parameter:
- `element`: smoothen the boxy histogram
</div>

{::options parse_block_html="false" /}

![title](/images/simple_hist4.png) 

